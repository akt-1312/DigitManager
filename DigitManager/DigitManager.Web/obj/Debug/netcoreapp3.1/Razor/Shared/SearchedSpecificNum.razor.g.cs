#pragma checksum "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f0b18f16a4a3423cd12eab95bf6df135f5ee64b1"
// <auto-generated/>
#pragma warning disable 1591
namespace DigitManager.Web.Shared
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.Web.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.Web.ExtensionWeb;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using BlazorPro.Spinkit;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.ModelLibrary;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.ModelLibrary.MainAndSubRelation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.ModelLibrary.CryptoExtensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\_Imports.razor"
using DigitManager.ModelLibrary.ViewModels;

#line default
#line hidden
#nullable disable
    public partial class SearchedSpecificNum : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, @"<style>
    #searchedSpecificNum .modal-content {
        background-color: aquamarine;
    }

    #tblSearchedSpecificNum th, #tblSearchedSpecificNum td {
        padding: 0px 5px;
        font-size: 13px;
    }

    .table {
        margin-bottom: 6px;
    }

    #tblSearchedSpecificNum td {
        vertical-align: middle;
        overflow-wrap: anywhere;
        font-size: 11px;
    }
</style>

");
#nullable restore
#line 23 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
 if (ShowSearchedSpecificNum)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(1, "    ");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "modal fade show d-block");
            __builder.AddAttribute(4, "id", "searchedSpecificNum");
            __builder.AddAttribute(5, "tabindex", "-1");
            __builder.AddAttribute(6, "role", "dialog");
            __builder.AddAttribute(7, "aria-labelledby", "exampleModalCenterTitle");
            __builder.AddAttribute(8, "aria-hidden", "true");
            __builder.AddAttribute(9, "style", "position:absolute;");
            __builder.AddMarkupContent(10, "\r\n        ");
            __builder.OpenElement(11, "div");
            __builder.AddAttribute(12, "class", "modal-dialog");
            __builder.AddAttribute(13, "role", "document");
            __builder.AddMarkupContent(14, "\r\n            ");
            __builder.OpenElement(15, "div");
            __builder.AddAttribute(16, "class", "modal-content");
            __builder.AddMarkupContent(17, "\r\n                ");
            __builder.OpenElement(18, "div");
            __builder.AddAttribute(19, "class", "modal-header");
            __builder.AddMarkupContent(20, "\r\n                    ");
            __builder.OpenElement(21, "h5");
            __builder.AddAttribute(22, "class", "modal-title text-danger text-center d-block w-100 font-weight-bold");
            __builder.AddAttribute(23, "id", "searchedSpecificNumTitle");
            __builder.AddMarkupContent(24, "\r\n                        ");
#nullable restore
#line 31 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(25, SearchedNumString);

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(26, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(27, "\r\n                    ");
            __builder.OpenElement(28, "button");
            __builder.AddAttribute(29, "type", "button");
            __builder.AddAttribute(30, "class", "close");
            __builder.AddAttribute(31, "data-dismiss", "modal");
            __builder.AddAttribute(32, "aria-label", "Close");
            __builder.AddAttribute(33, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                      ()=> Hide()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(34, "\r\n                        ");
            __builder.AddMarkupContent(35, "<span aria-hidden=\"true\">&times;</span>\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(36, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(37, "\r\n                ");
            __builder.OpenElement(38, "div");
            __builder.AddAttribute(39, "class", "modal-body");
            __builder.AddMarkupContent(40, "\r\n                    ");
            __builder.OpenElement(41, "div");
            __builder.AddMarkupContent(42, "\r\n                        ");
            __builder.OpenElement(43, "div");
            __builder.AddAttribute(44, "class", "form-group displayGridInputLabel");
            __builder.AddMarkupContent(45, "\r\n                            ");
            __builder.AddMarkupContent(46, "<label class=\"lblSearch\">Agent</label>\r\n                            ");
            __builder.OpenElement(47, "select");
            __builder.AddAttribute(48, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 42 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                                                                     LoadSearchedSubDigits

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(49, "class", "txtSearch");
            __builder.AddAttribute(50, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 42 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                           AgentId

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(51, "oninput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => AgentId = __value, AgentId));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddMarkupContent(52, "\r\n                                ");
            __builder.OpenElement(53, "option");
            __builder.AddAttribute(54, "value", "0");
            __builder.AddContent(55, "--All--");
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\r\n");
#nullable restore
#line 44 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                 foreach (var agent in Agents)
                                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(57, "                                    ");
            __builder.OpenElement(58, "option");
            __builder.AddAttribute(59, "value", 
#nullable restore
#line 46 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                                    agent.AgentId

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 46 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(60, agent.UserName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(61, "\r\n");
#nullable restore
#line 47 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(62, "                            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(63, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(65, "\r\n                    ");
            __builder.OpenElement(66, "div");
            __builder.AddMarkupContent(67, "\r\n                        ");
            __builder.OpenElement(68, "div");
            __builder.AddAttribute(69, "class", "separateScrollFullHeight");
            __builder.AddAttribute(70, "style", "height:400px;");
            __builder.AddMarkupContent(71, "\r\n");
#nullable restore
#line 53 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                             foreach (KeyValuePair<Agent, List<SubDigit>> item in ToShowSearchedSubdigits)
                            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(72, "                                ");
            __builder.OpenElement(73, "div");
            __builder.AddAttribute(74, "class", "text-center");
            __builder.AddAttribute(75, "style", "color:navy;");
#nullable restore
#line 55 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(76, item.Key.UserName);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(77, "\r\n                                ");
            __builder.OpenElement(78, "table");
            __builder.AddAttribute(79, "id", "tblSearchedSpecificNum");
            __builder.AddAttribute(80, "class", "table table-hover table-bordered");
            __builder.AddMarkupContent(81, "\r\n                                    ");
            __builder.OpenElement(82, "tbody");
            __builder.AddMarkupContent(83, "\r\n");
#nullable restore
#line 58 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                         foreach (var subdigit in item.Value)
                                        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(84, "                                            ");
            __builder.OpenElement(85, "tr");
            __builder.AddMarkupContent(86, "\r\n                                                ");
            __builder.OpenElement(87, "td");
#nullable restore
#line 61 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(88, subdigit.MainDigit.DescriptionToShowUser);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(89, "\r\n                                                ");
            __builder.OpenElement(90, "td");
            __builder.AddAttribute(91, "style", "width:100px;");
#nullable restore
#line 62 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(92, subdigit.Ammount);

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(93, "\r\n                                            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n");
#nullable restore
#line 64 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                                        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(95, "                                        ");
            __builder.OpenElement(96, "tr");
            __builder.AddAttribute(97, "class", "bg-primary");
            __builder.AddMarkupContent(98, "\r\n                                            ");
            __builder.AddMarkupContent(99, "<td class=\"text-right\" style=\"color:yellow;\">Total: </td>\r\n                                            ");
            __builder.OpenElement(100, "td");
            __builder.AddAttribute(101, "style", "color:yellow;");
#nullable restore
#line 67 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
__builder.AddContent(102, item.Value.Sum(x => x.Ammount));

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(103, "\r\n                                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(104, "\r\n                                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(105, "\r\n                                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(106, "\r\n");
#nullable restore
#line 71 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(107, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(108, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(109, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(110, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(111, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(112, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(113, "\r\n");
#nullable restore
#line 82 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 84 "D:\Old Data\DM_Back\DM_2020_12_14\DigitManager\DigitManager.Web\Shared\SearchedSpecificNum.razor"
       

    [Parameter]
    public string SearchedNumString { get; set; } = "";

    [Parameter]
    public List<SubDigit> SearchedSubdigits { get; set; } = new List<SubDigit>();

    private Dictionary<Agent, List<SubDigit>> ToShowSearchedSubdigits { get; set; } = new Dictionary<Agent, List<SubDigit>>();

    protected int AgentId { get; set; }

    protected List<Agent> Agents { get; set; } = new List<Agent>();

    public bool ShowSearchedSpecificNum { get; set; }

    public void Show()
    {
        ShowSearchedSpecificNum = true;
        StateHasChanged();
    }

    protected override void OnParametersSet()
    {
        LoadSearchedSubDigits();
        base.OnParametersSet();
    }

    public void Hide()
    {
        ShowSearchedSpecificNum = false;
        SearchedNumString = "";
        AgentId = 0;
        ToShowSearchedSubdigits = new Dictionary<Agent, List<SubDigit>>();
        StateHasChanged();
    }

    private void LoadSearchedSubDigits()
    {
        var agents = SearchedSubdigits.Where(x => x.TwoNum.Trim() == SearchedNumString.Trim())
            .Select(x => x.MainDigit.AgentId).Distinct().ToList().Select(a => new
            {
                agent = SearchedSubdigits.Select(y => y.MainDigit.Agent).FirstOrDefault(s => s.AgentId == a),
            }).Select(ag => ag.agent).ToList();
        Agents = agents ?? new List<Agent>();
        var searchedSubdigits = new List<int>();
        if (AgentId == 0)
        {
            searchedSubdigits = SearchedSubdigits.Where(x => x.TwoNum.Trim() == SearchedNumString.Trim()).Select(x => x.MainDigit.AgentId).Distinct().ToList();
        }
        else
        {
            searchedSubdigits = SearchedSubdigits.Where(x => x.TwoNum.Trim() == SearchedNumString.Trim() && x.MainDigit.AgentId == AgentId)
                .Select(x => x.MainDigit.AgentId).Distinct().ToList();
        }

        var subdigitsGroupByAgent = searchedSubdigits.Select(x => new
        {
            agent = SearchedSubdigits.Where(sub => sub.MainDigit.AgentId == x).Select(sub => sub.MainDigit.Agent).FirstOrDefault(),
            subdigits = SearchedSubdigits.Where(sub => sub.MainDigit.AgentId == x && sub.TwoNum.Trim() == SearchedNumString.Trim())
                        .GroupBy(gp => gp.MainDigitId).Select(s=> new
                        {
                            subdigit = s.ToList().Where(d=> d.MainDigitId == s.Key).Select(y=> { y.Ammount = s.ToList().Sum(y => y.Ammount); return y; }).FirstOrDefault()
                        }).Select(b=> b.subdigit).ToList()
        }).ToDictionary(k => k.agent, v => v.subdigits);

        ToShowSearchedSubdigits = subdigitsGroupByAgent ?? new Dictionary<Agent, List<SubDigit>>();
    }



#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
